{% load filters %}
{% for i in questions %}
	<div class="card w-75 my-2">
		<div class="card-header" style="background-color: #80ffff;">
			{{ i.question_text }}
		</div>
		<div class="card-body p-3">
			<form id="poll{{ i.id }}">
				{% csrf_token %}

				<input type="hidden" id="poll" name="poll" value="poll{{ i.id }}">
				<input type="hidden" id="optionSelected" name="vote">

				<div class="optionInfo">
					<div class="bar-representation border border-dark rounded mb-3 p-2" onclick="sendVote(this.parentNode.parentNode ,this)" id="op1">
						{{ i.op1 }}
						<div class="voteQuantifier border rounded" style="width: {{ choices|dict_item:i.id|list_item:0 }}%">
						</div>
					</div>
					<p class="votesPercentage">{{ choices|dict_item:i.id|list_item:0 }}%</p>
				</div>
				<div class="optionInfo">
					<div class="bar-representation border border-dark rounded mb-3 p-2" onclick="sendVote(this.parentNode.parentNode ,this)" id="op2">
						{{ i.op2 }}
						<div class="voteQuantifier border rounded" style="width: {{ choices|dict_item:i.id|list_item:1 }}%">
						</div>
					</div>
					<p class="votesPercentage">{{ choices|dict_item:i.id|list_item:1 }}%</p>
				</div>
				<div class="optionInfo">
					<div class="bar-representation border border-dark rounded mb-3 p-2" onclick="sendVote(this.parentNode.parentNode, this)" id="op3">
						{{ i.op3 }}
						<div class="voteQuantifier border rounded" style="width: {{ choices|dict_item:i.id|list_item:2 }}%">
						</div>
					</div>
					<p class="votesPercentage">{{ choices|dict_item:i.id|list_item:2 }}%</p>
				</div>
				<div class="optionInfo">
					<div class="bar-representation border border-dark rounded mb-3 p-2" onclick="sendVote(this.parentNode.parentNode ,this)" id="op4">
						{{ i.op4 }}
						<div class="voteQuantifier border rounded" style="width: {{ choices|dict_item:i.id|list_item:3 }}%">
						</div>
					</div>
					<p class="votesPercentage">{{ choices|dict_item:i.id|list_item:3 }}%</p>
				</div>
			</form>
		</div>
	</div>
{% endfor %}
<script>
	function reload_all_polls() {
		$.ajax({
			url: "polls",
			type: "GET",
			processData: false,
			contentType: false,
			success: function(result){
				document.querySelector('.pollsContainer').innerHTML = result;
			}
		});
	}
</script>